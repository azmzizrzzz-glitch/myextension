// ØªØ³Øª Ù†Ù‡Ø§ÛŒÛŒ Zabbix 5.0
const tables = document.querySelectorAll('table');
let found = 0;

tables.forEach((table) => {
    const rows = table.querySelectorAll('tbody tr');
    
    rows.forEach((row) => {
        const cells = row.querySelectorAll('td');
        if (cells.length < 7) return;
        
        const time = cells[0]?.innerText?.trim() || '';
        const host = cells[4]?.innerText?.trim() || '';
        const problem = cells[5]?.innerText?.trim() || '';
        const duration = cells[6]?.innerText?.trim() || '';
        
        if (!duration || !problem) return;
        
        // ØªØ¨Ø¯ÛŒÙ„ Duration Ø¨Ù‡ Ø¯Ù‚ÛŒÙ‚Ù‡
        let minutes = 0;
        const h = duration.match(/(\d+)h/);
        const m = duration.match(/(\d+)m/);
        const s = duration.match(/(\d+)s/);
        
        if (h) minutes += parseInt(h[1]) * 60;
        if (m) minutes += parseInt(m[1]);
        if (s) minutes += parseInt(s[1]) / 60;
        
        // ÙˆØ¶Ø¹ÛŒØª Ø¢Ù„Ø§Ø±Ù…
        let status = 'âŒ Ø¨Ø¯ÙˆÙ† Ø¢Ù„Ø§Ø±Ù…';
        if (minutes >= 5 && minutes <= 10) {
            status = 'ðŸš¨ Ø¢Ù„Ø§Ø±Ù…!';
        }
        
        found++;
        console.log(`Host: ${host}`);
        console.log(`Problem: ${problem}`);
        console.log(`Duration: ${duration} (${minutes.toFixed(1)} Ø¯Ù‚ÛŒÙ‚Ù‡)`);
        console.log(`Status: ${status}`);
        console.log('---');
    });
});

console.log(`\nâœ… ØªØ¹Ø¯Ø§Ø¯: ${found}`);
